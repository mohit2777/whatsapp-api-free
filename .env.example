# WhatsApp Multi-Automation Configuration
# Copy this file to .env and fill in the values
# Last Updated: 2026-01-22

# =============================================================================
# REQUIRED - Database (Choose one)
# =============================================================================

# Option 1: Supabase (Recommended)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Option 2: Direct PostgreSQL Connection String
DATABASE_URL=postgresql://postgres:password@host:5432/dbname

# Option 3: Supabase Direct DB Password (for session storage)
SUPABASE_DB_PASSWORD=your-db-password

# =============================================================================
# REQUIRED - Dashboard Authentication
# =============================================================================
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=your-secure-password-minimum-12-chars

# =============================================================================
# REQUIRED - Security
# =============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=your-random-64-character-hex-string

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3000
NODE_ENV=production

# =============================================================================
# ANTI-BAN: WHATSAPP MESSAGE RATE LIMITING
# =============================================================================
# These settings control how fast messages are sent to prevent WhatsApp bans
# CRITICAL: Do not set these too high or your account WILL be banned!

# Minimum milliseconds between messages (default: 5000 = 5 seconds)
# Lower = faster but higher ban risk. Recommended: 5000-10000
WA_MIN_MESSAGE_INTERVAL_MS=5000

# Maximum messages per hour per account (default: 60)
# WhatsApp typically bans accounts sending 100+ messages/hour
WA_MAX_MESSAGES_PER_HOUR=60

# Maximum messages per day per account (default: 500)
# Conservative limit to avoid detection
WA_MAX_MESSAGES_PER_DAY=500

# Random delay added to each message (default: 2000 = 0-2 seconds)
# Adds human-like randomness to timing
WA_RANDOM_DELAY_MS=2000

# Typing indicator delay before sending (default: 1500 = 1.5 seconds)
# Simulates human typing. 0 to disable.
TYPING_DELAY_MS=1500

# =============================================================================
# ANTI-BAN: HTTP API RATE LIMITING
# =============================================================================
# These protect the API from abuse. Adjust based on your expected traffic.
# Set DISABLE_RATE_LIMITING=true ONLY if you have external rate limiting (Cloudflare, etc.)

DISABLE_RATE_LIMITING=false
TRUST_PROXY=false

# General API (default: 100 requests per minute)
API_RATE_WINDOW_MS=60000
API_RATE_MAX=100

# Login/Auth endpoints (default: 10 requests per 15 minutes)
AUTH_RATE_WINDOW_MS=900000
AUTH_RATE_MAX=10

# Message sending (default: 30 requests per minute)
MESSAGE_RATE_WINDOW_MS=60000
MESSAGE_RATE_MAX=30

# Webhook creation (default: 20 per hour)
WEBHOOK_RATE_WINDOW_MS=3600000
WEBHOOK_RATE_MAX=20

# Account creation (default: 5 per day - prevents farming)
ACCOUNT_RATE_WINDOW_MS=86400000
ACCOUNT_RATE_MAX=5

# =============================================================================
# ANTI-BAN: CONNECTION BEHAVIOR
# =============================================================================
# These settings make the app behave more like a real WhatsApp user

# Disable auto-reconnect of all accounts on startup
# Recommended: false for production, true for debugging
DISABLE_AUTO_INIT=false

# Disable message logging to database (saves space but loses history)
DISABLE_MESSAGE_LOGGING=false

# =============================================================================
# KEEPALIVE (For Render/Railway Free Tier)
# =============================================================================
# External URL to ping to prevent server sleep
# Use an external service like UptimeRobot to ping YOUR server's /ping endpoint
# Do NOT set this to ping yourself - that defeats the purpose!
# KEEPALIVE_URL=https://your-app.onrender.com/ping

# Ping interval in minutes (default: 14, minimum: 1)
KEEPALIVE_INTERVAL_MINUTES=14

# =============================================================================
# AI CHATBOT PROVIDERS (Optional)
# =============================================================================
# Configure these in the dashboard per-account, or set global defaults here

# OpenAI
# OPENAI_API_KEY=sk-...

# Google Gemini
# GEMINI_API_KEY=...

# Anthropic Claude
# ANTHROPIC_API_KEY=sk-ant-...

# Groq (Fast inference)
# GROQ_API_KEY=gsk_...

# OpenRouter (Multiple models)
# OPENROUTER_API_KEY=sk-or-...

# =============================================================================
# LOGGING
# =============================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# =============================================================================
# ADVANCED: Device Fingerprint (Usually not needed)
# =============================================================================
# The app generates realistic browser fingerprints automatically.
# Only change these if you know what you're doing.

# Force specific Chrome version (default: auto-generated from pool)
# FORCE_CHROME_VERSION=131.0.6778.139

# Force specific platform (default: weighted random Windows/Mac/Linux)
# FORCE_PLATFORM=Windows 10

